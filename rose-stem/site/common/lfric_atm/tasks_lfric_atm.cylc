{# ########################################################################### #}
{# (c) Crown copyright 2024 Met Office. All rights reserved. #}
{# The file LICENCE, distributed with this code, contains details of the terms #}
{# under which the code may be used. #}
{# ########################################################################### #}
{% do LOG.debug("Entered site/common/lfric_atm/tasks_lfric_atm.cylc") %}

{% if task_ns.conf_name == "nwp_gal9-C12" %}

    {% do task_dict.update({
        "opt_confs": ["nwp_gal9"],
        "resolution": "C12",
        "DT": 1800,
        "tsteps": 144,
        "crun": 2,
        "crun_compare": false,
        "mpi_parts": 6,
        "threads": 2,
        "kgo_checks": ["checksum"],
        "plot_str": "plot_map.py $NODAL_DATA_DIR/lfric_gal_diagnostics.nc  $PLOT_DIR",
    }) %}

{% elif task_ns.conf_name == "nwp_gal9-C12-short" %}

    {% do task_dict.update({
        "opt_confs": ["nwp_gal9_short"],
        "resolution": "C12",
        "DT": 1800,
        "tsteps": 2,
        "crun": 2,
        "mpi_parts": 6,
        "kgo_checks": ["checksum"],
    }) %}

{% elif task_ns.conf_name == "scm_ukca_land-BiP2x2-50000x50000" %}

    {% do task_dict.update({
        "opt_confs": ["scm_ukca_land"],
        "resolution": "BiP2x2-50000x50000",
        "DT": 600,
        "tsteps": 432,
        "crun": 2,
        "kgo_checks": ["checksum"],
        "plot_str": "plot_scm.py $NODAL_DATA_DIR/lfric_diag.nc  $PLOT_DIR",
    }) %}

{% elif task.startswith("build") %}

    {% do task_dict.update({
        "placeholder": true,
    }) %}

{% endif %}

{# Set default values for lfric_atm tasks #}
{% if task_dict %}
    {% do task_dict.update({"application_dir": "apps/applications/lfric_atm"}) %}
    {% if "app_name" not in task_dict %}
        {% do task_dict.update({"app_name": "lfric_atm"}) %}
    {% endif %}
{% endif %}

{% do LOG.debug("Finished in site/common/lfric_atm/tasks_lfric_atm.cylc") %}